{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { useRouter } from 'vue-router';\nimport zhCn from 'element-plus/dist/locale/zh-cn.mjs';\nvar timestamps = require('moment-timezone');\nimport { useStore } from 'vuex';\nimport { ref, reactive, onBeforeMount } from \"vue\";\nexport function useVwSize() {\n  const data = reactive({\n    name: '张三',\n    age: 18,\n    video_info: '111',\n    isShow: false,\n    videoElement: []\n  });\n  const tablePage = reactive({\n    pageNum: 1,\n    // 第几页\n    pageSize: 2,\n    // 每页多少条\n    total: 0,\n    // 总记录数\n    showPage: [],\n    // 每页展示的数据\n    tableData: []\n  });\n  zhCn.el.pagination = {\n    goto: '向前',\n    pageClassifier: '✌'\n  };\n  const renameRef = ref(null);\n  const store = useStore();\n  const $router = useRouter();\n  const route = $router.currentRoute.value.name;\n  onBeforeMount(() => {\n    axios.post(`http://localhost:3000/${route == 'videoManage' ? 'videoManage' : 'unpublished'}`, {\n      params: {\n        id: store.state.userInfo._id\n      }\n    }).then(response => {\n      data.video_info = response.data.newdata;\n      console.log('response.data.newdata', response.data.newdata);\n      tablePage.tableData = data.video_info;\n      tablePage.total = Math.ceil(data.video_info.length / tablePage.pageSize);\n      page(tablePage.pageNum);\n      data.video_info.sort((a, b) => {\n        if (a['VideoHV'] != b['VideoHV']) {\n          return b['VideoHV'].localeCompare(a['VideoHV']);\n        }\n      });\n    });\n  });\n  const handlePageChange = function (currentPage) {\n    console.log('currentPage', currentPage);\n    if (tablePage.pageNum <= tablePage.total) {\n      page(currentPage);\n    }\n  };\n  const handleSizeChange = function (pageSize) {\n    console.log('每页多少条', pageSize);\n  };\n  const page = function (num) {\n    console.log('num', num);\n    tablePage.pageNum = num;\n    var list = (tablePage.pageNum - 1) * tablePage.pageSize;\n    tablePage.showPage = tablePage.tableData.slice(list, list + tablePage.pageSize);\n  };\n  const getViewportSize = () => {\n    data.width = document.body.clientWidth;\n    data.height = document.body.clientHeight;\n  };\n  data.videoElement = document.getElementsByTagName('video');\n  const videoElement = data.videoElement;\n  const ObtainI = function (index) {\n    for (var i = 0; i < data.video_info.length; i++) {\n      if (i === index) {\n        return JSON.stringify(tablePage.showPage[index]);\n      }\n    }\n  };\n  const ModifyInfo = function (index) {\n    $router.push({\n      name: 'uploadHome',\n      params: {\n        code: 0,\n        data: ObtainI(index)\n      }\n    });\n  };\n  const DeleteInfo = function (index) {\n    axios.post('http://localhost:3000/deleteVideoInfo', {\n      params: {\n        videoinfo: ObtainI(index)\n      }\n    }).then(res => {\n      let newarr = JSON.parse(res.data.aa.videoinfo);\n      console.log(newarr.classify);\n    });\n    console.log(ObtainI(index));\n  };\n  const playVid = function (fs) {\n    if (videoElement && videoElement.length > 0) {\n      for (let i = 0; i < videoElement.length; i++) {\n        if (i === fs) {\n          videoElement[i].play() instanceof Promise;\n        } else {\n          videoElement[i].pause();\n        }\n      }\n    }\n  };\n  const videoStop = function (fs) {\n    let newIndex = renameRef._value[fs];\n    newIndex.pause();\n  };\n  return {\n    getViewportSize,\n    tablePage,\n    data,\n    page,\n    playVid,\n    videoStop,\n    renameRef,\n    handlePageChange,\n    handleSizeChange,\n    ModifyInfo,\n    DeleteInfo\n  };\n}","map":{"version":3,"names":["axios","useRouter","zhCn","timestamps","require","useStore","ref","reactive","onBeforeMount","useVwSize","data","name","age","video_info","isShow","videoElement","tablePage","pageNum","pageSize","total","showPage","tableData","el","pagination","goto","pageClassifier","renameRef","store","$router","route","currentRoute","value","post","params","id","state","userInfo","_id","then","response","newdata","console","log","Math","ceil","length","page","sort","a","b","localeCompare","handlePageChange","currentPage","handleSizeChange","num","list","slice","getViewportSize","width","document","body","clientWidth","height","clientHeight","getElementsByTagName","ObtainI","index","i","JSON","stringify","ModifyInfo","push","code","DeleteInfo","videoinfo","res","newarr","parse","aa","classify","playVid","fs","play","Promise","pause","videoStop","newIndex","_value"],"sources":["D:/vue3/video/src/hooks/videoHome.js"],"sourcesContent":["\r\nimport axios from 'axios'\r\nimport { useRouter } from 'vue-router'\r\nimport zhCn from 'element-plus/dist/locale/zh-cn.mjs'\r\nvar timestamps = require('moment-timezone');\r\nimport { useStore } from 'vuex'\r\nimport { ref, reactive, onBeforeMount, } from \"vue\";\r\n\r\nexport function useVwSize() {\r\n    const data = reactive({\r\n        name: '张三',\r\n        age: 18,\r\n        video_info: '111',\r\n        isShow: false,\r\n        videoElement: [],\r\n    })\r\n\r\n    const tablePage = reactive({\r\n        pageNum: 1, // 第几页\r\n        pageSize: 2, // 每页多少条\r\n        total: 0, // 总记录数\r\n        showPage: [],       // 每页展示的数据\r\n        tableData: [],\r\n    })\r\n    zhCn.el.pagination = {\r\n        goto: '向前',\r\n        pageClassifier: '✌'\r\n    }\r\n    const renameRef = ref(null)\r\n    const store = useStore()\r\n    const $router = useRouter()\r\n    const route = $router.currentRoute.value.name\r\n    onBeforeMount(() => {\r\n        axios.post(`http://localhost:3000/${route == 'videoManage' ? 'videoManage' : 'unpublished'}`, {\r\n            params: {\r\n                id: store.state.userInfo._id\r\n            }\r\n        }).then((response) => {\r\n            data.video_info = response.data.newdata\r\n            console.log('response.data.newdata', response.data.newdata);\r\n            tablePage.tableData = data.video_info\r\n            tablePage.total = Math.ceil(data.video_info.length / tablePage.pageSize);\r\n            page(tablePage.pageNum)\r\n            data.video_info.sort((a, b) => {\r\n                if (a['VideoHV'] != b['VideoHV']) {\r\n                    return b['VideoHV'].localeCompare(a['VideoHV']);\r\n                }\r\n            })\r\n        })\r\n    });\r\n\r\n    const handlePageChange = function (currentPage) {\r\n        console.log('currentPage', currentPage);\r\n\r\n        if (tablePage.pageNum <= tablePage.total) {\r\n            page(currentPage)\r\n        }\r\n    }\r\n    const handleSizeChange = function (pageSize) {\r\n        console.log('每页多少条', pageSize);\r\n\r\n    }\r\n    const page = function (num) {\r\n        console.log('num', num);\r\n        tablePage.pageNum = num\r\n        var list = (tablePage.pageNum - 1) * tablePage.pageSize;\r\n        tablePage.showPage = tablePage.tableData.slice(list, list + tablePage.pageSize);\r\n    }\r\n\r\n    const getViewportSize = () => {\r\n        data.width = document.body.clientWidth;\r\n        data.height = document.body.clientHeight;\r\n    }\r\n    data.videoElement = document.getElementsByTagName('video')\r\n    const videoElement = data.videoElement\r\n    const ObtainI = function (index) {\r\n        for (var i = 0; i < data.video_info.length; i++) {\r\n            if (i === index) {\r\n                return JSON.stringify(tablePage.showPage[index])\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n    const ModifyInfo = function (index) {\r\n        $router.push({\r\n            name: 'uploadHome',\r\n            params: {\r\n                code: 0,\r\n                data: ObtainI(index)\r\n            }\r\n        })\r\n    }\r\n\r\n    const DeleteInfo = function(index){\r\n        axios.post('http://localhost:3000/deleteVideoInfo',{\r\n            params:{\r\n                videoinfo:ObtainI(index)\r\n            }\r\n        }).then((res)=>{\r\n            let newarr = JSON.parse(res.data.aa.videoinfo)\r\n            console.log(newarr.classify);\r\n        })\r\n        console.log(ObtainI(index));\r\n    }\r\n\r\n    const playVid = function (fs) {\r\n        if (videoElement && videoElement.length > 0) {\r\n            for (let i = 0; i < videoElement.length; i++) {\r\n                if (i === fs) {\r\n                    videoElement[i].play() instanceof Promise\r\n                } else {\r\n                    videoElement[i].pause()\r\n                }\r\n            }\r\n        }\r\n    }\r\n    const videoStop = function (fs) {\r\n        let newIndex = renameRef._value[fs]\r\n        newIndex.pause()\r\n    }\r\n\r\n    return {\r\n        getViewportSize, tablePage, data, page, playVid, videoStop, \r\n        renameRef, handlePageChange, handleSizeChange, ModifyInfo,DeleteInfo\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}