{"ast":null,"code":"import { createRouter, createWebHistory } from 'vue-router';\nimport store from '@/store/index';\nimport Register from '../account/register.vue';\nimport Login from '../account/login.vue';\nimport Index from '../components/index.vue';\nimport New from '../components/new/VideoManagement/new.vue';\nimport Upload from '../components/new/VideoManagement/upload.vue';\nimport UploadHome from '../components/new/VideoManagement/uploadHome.vue';\nimport videoManage from '../components/new/VideoManagement/videoManage.vue';\nimport unpublished from '../components/new/VideoManagement/unpublished.vue';\nimport axios from 'axios';\nconst routes = [{\n  path: '/register',\n  component: Register,\n  meta: {\n    title: '注册'\n  },\n  name: 'Register'\n}, {\n  path: '/login',\n  component: Login,\n  meta: {\n    title: '登录'\n  }\n}, {\n  path: '/index',\n  component: Index,\n  meta: {\n    title: '首页',\n    show: false,\n    keepAlive: true\n  },\n  name: 'Index'\n}, {\n  path: '/new',\n  component: New,\n  meta: {\n    title: '我的'\n  },\n  redirect: '/new/upload',\n  children: [{\n    path: 'upload',\n    meta: {\n      title: '上传文件aaaaaaaaaaa'\n    },\n    name: 'upload',\n    component: Upload,\n    props: true\n  }, {\n    path: 'uploadHome',\n    meta: {\n      title: '上传视频'\n    },\n    component: UploadHome,\n    name: 'uploadHome'\n  }, {\n    path: 'videoManage',\n    meta: {\n      title: '视频管理',\n      keepAlive: true\n    },\n    component: videoManage,\n    name: 'videoManage'\n  }, {\n    path: 'unpublished',\n    meta: {\n      title: '未发布'\n    },\n    component: unpublished,\n    name: 'unpublished'\n  }]\n}];\nconst router = createRouter({\n  history: createWebHistory(),\n  routes,\n  mode: 'history'\n});\nrouter.beforeEach((to, from, next) => {\n  if (localStorage.getItem(\"teaUserInfo\")) {\n    // 判断是否登录\n    if (to.path != \"/\" && to.path != \"/login\") {\n      //判断是否要跳到登录界面\n      next();\n      document.title = to.meta.title;\n    } else {\n      /**\r\n       * 防刷新，如果登录，修改路由跳转到登录页面，修改路由为登录后的首页\r\n       */\n      next({\n        path: '/index'\n      });\n    }\n  } else {\n    next();\n  }\n});\nrouter.afterEach(() => {\n  if (sessionStorage.getItem('V_id')) {\n    axios.post('http://localhost:3000/deleteInfo', {\n      params: {\n        v_id: sessionStorage.getItem('V_id'),\n        //  user_id: store.state.userInfo.userid\n        user_id: store.state.userInfo._id\n      }\n    }).then(() => {\n      store.state.projectTitleId = '';\n      sessionStorage.clear();\n    });\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","store","Register","Login","Index","New","Upload","UploadHome","videoManage","unpublished","axios","routes","path","component","meta","title","name","show","keepAlive","redirect","children","props","router","history","mode","beforeEach","to","from","next","localStorage","getItem","document","afterEach","sessionStorage","post","params","v_id","user_id","state","userInfo","_id","then","projectTitleId","clear"],"sources":["D:/vue3/video/src/router/index.js"],"sourcesContent":["\r\nimport { createRouter, createWebHistory } from 'vue-router'\r\n\r\nimport store from '@/store/index'\r\nimport Register from '../account/register.vue'\r\nimport Login from '../account/login.vue'\r\nimport Index from '../components/index.vue'\r\nimport New from '../components/new/VideoManagement/new.vue'\r\nimport Upload from '../components/new/VideoManagement/upload.vue'\r\nimport UploadHome from '../components/new/VideoManagement/uploadHome.vue'\r\n\r\n \r\nimport videoManage from '../components/new/VideoManagement/videoManage.vue'\r\nimport unpublished from '../components/new/VideoManagement/unpublished.vue'\r\nimport axios from 'axios';\r\nconst routes = [\r\n\r\n   {\r\n      path: '/register',\r\n      component: Register,\r\n      meta: {\r\n         title: '注册'\r\n      },\r\n      name: 'Register'\r\n   },\r\n   {\r\n      path: '/login',\r\n      component: Login,\r\n      meta: {\r\n         title: '登录'\r\n      }\r\n   },\r\n   {\r\n      path: '/index',\r\n      component: Index,\r\n      meta: {\r\n         title: '首页',\r\n         show:false,\r\n         keepAlive:true,\r\n      },\r\n      name: 'Index'\r\n   },\r\n   {\r\n      path: '/new',\r\n      component: New,\r\n      meta: {\r\n         title: '我的'\r\n      },\r\n      redirect:'/new/upload',\r\n      children: [\r\n         {\r\n            path: 'upload',\r\n            meta: {\r\n               title: '上传文件aaaaaaaaaaa',\r\n            },\r\n            name:'upload',\r\n            component:Upload,\r\n            props: true\r\n         },\r\n         {\r\n            path:'uploadHome',\r\n            meta:{\r\n               title:'上传视频',\r\n            },\r\n            component:UploadHome,\r\n            name:'uploadHome'\r\n         },\r\n         {\r\n            path:'videoManage',\r\n            meta:{\r\n               title:'视频管理',\r\n               keepAlive:true,\r\n               \r\n            },\r\n            component:videoManage,\r\n            name:'videoManage'\r\n         },\r\n         {\r\n            path:'unpublished',\r\n            meta:{\r\n               title:'未发布'\r\n            },\r\n            component:unpublished,\r\n            name:'unpublished'\r\n         }\r\n      ]\r\n   },\r\n]\r\n\r\n\r\nconst router = createRouter({\r\n   history: createWebHistory(),\r\n   routes,\r\n   mode:'history'\r\n})\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n   if (localStorage.getItem(\"teaUserInfo\")) { // 判断是否登录\r\n      if (to.path != \"/\" && to.path != \"/login\") { //判断是否要跳到登录界面\r\n         next();\r\n         document.title = to.meta.title\r\n      } else {\r\n         /**\r\n          * 防刷新，如果登录，修改路由跳转到登录页面，修改路由为登录后的首页\r\n          */\r\n         next({\r\n            path: '/index'\r\n         })\r\n\r\n      }\r\n   } else {\r\n      next();\r\n   }\r\n})\r\nrouter.afterEach(() =>{\r\n   if (sessionStorage.getItem('V_id')) {\r\n      axios.post('http://localhost:3000/deleteInfo', {\r\n        params: {\r\n          v_id: sessionStorage.getItem('V_id'),\r\n         //  user_id: store.state.userInfo.userid\r\n          user_id: store.state.userInfo._id\r\n        }\r\n      }).then(() => {\r\n         store.state.projectTitleId = ''\r\n        sessionStorage.clear()\r\n      })\r\n    }\r\n \r\n\r\n})\r\n\r\n\r\n\r\nexport default router\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}