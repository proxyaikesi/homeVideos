{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { mapState } from 'vuex';\nexport default {\n  props: ['order'],\n  data() {\n    return {\n      UPLOAD_INFO: {\n        NO_FILE: \"请先选择文件\",\n        INVALID_TYPE: \"不支持该类型文件上传\",\n        UPLOAD_FAILED: \"上传失败\",\n        UPLOAD_SUCCESS: \"上传成功\"\n      },\n      ALLOWED_TYPE: {\n        \"video/mp4\": \"mp4\",\n        \"video/ogg\": \"ogg\"\n      },\n      uploadFile: ''\n    };\n  },\n  mounted() {\n    if (sessionStorage.getItem('V_id')) {\n      axios.post('http://localhost:3000/deleteInfo', {\n        params: {\n          v_id: sessionStorage.getItem('V_id'),\n          user_id: this.$store.state.userInfo.userid\n        }\n      }).then(() => {\n        sessionStorage.clear();\n      });\n    }\n  },\n  created() {},\n  methods: {\n    load(e) {\n      this.uploadFile = this.$refs.file;\n      const {\n        files: [file]\n      } = this.uploadFile;\n      this.file = file;\n      this.a(this.$refs.file);\n    },\n    fileDragover(e) {\n      e.preventDefault();\n    },\n    fileDrop(e) {\n      e.preventDefault();\n      console.log(e.dataTransfer.files);\n      const file = e.dataTransfer.files[0];\n      this.file = file;\n      this.a(file);\n    },\n    a(jfile) {\n      if (!jfile) {\n        this.$message({\n          message: this.UPLOAD_INFO.NO_FILE,\n          type: 'warning'\n        });\n        return;\n      }\n      if (!this.ALLOWED_TYPE[this.file.type]) {\n        this.$message({\n          message: this.UPLOAD_INFO.INVALID_TYPE,\n          type: 'warning'\n        });\n        return;\n      } else {\n        const aa = this.$refs.file;\n        const {\n          files: [file]\n        } = aa;\n        if (jfile.name == '') {\n          this.$store.commit(\"SET_PROJECTTITLEID\", [{\n            id: file\n          }]);\n          console.log('aaaaaaaaaaaaaaaaaaa', aa);\n        } else {\n          this.$store.commit(\"SET_PROJECTTITLEID\", [{\n            id: jfile\n          }]);\n        }\n        this.$router.push({\n          name: 'uploadHome'\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","mapState","props","data","UPLOAD_INFO","NO_FILE","INVALID_TYPE","UPLOAD_FAILED","UPLOAD_SUCCESS","ALLOWED_TYPE","uploadFile","mounted","sessionStorage","getItem","post","params","v_id","user_id","$store","state","userInfo","userid","then","clear","created","methods","load","e","$refs","file","files","a","fileDragover","preventDefault","fileDrop","console","log","dataTransfer","jfile","$message","message","type","aa","name","commit","id","$router","push"],"sources":["D:\\vue3\\video\\src\\components\\new\\VideoManagement\\upload.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"img_pink\">\r\n      <img src=\"../../../../public/img_pink.png\" alt=\"\">\r\n      <h1>上传文件啦!!</h1>\r\n    </div>\r\n    <div class=\"layout_cont\">\r\n      <div class=\"uploadbox\">\r\n        <div class=\"upload_main\" @dragover=\"fileDragover\" @drop=\"fileDrop\">\r\n          <img src=\"../../../../public/upload.png\" @dragstart.prevent alt=\"\">\r\n        </div>\r\n        <div class=\"upload_right\">\r\n\r\n          <label>\r\n            <span>上传本地视频</span>\r\n            <input type=\"file\" @change=\"load\" class=\"file-input\" :v-model=\"uploadFile\" ref=\"file\"\r\n              style=\"display: none;\" />\r\n          </label>\r\n\r\n          <p style=\"margin-top: 6px;\">将短视频拖拽至框内</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"info\">\r\n        <div class=\"info_item\">\r\n          <p>视频格式</p>\r\n          <p> 支持常用格式,使用mp4、ogg</p>\r\n        </div>\r\n        <div class=\"info_item\">\r\n          <p>视频大小</p>\r\n          <p>视频文件大小不超过16G,时长在60分钟以内</p>\r\n        </div>\r\n        <div class=\"info_item\">\r\n          <p>视频分辨率</p>\r\n          <p>分辨率为720p(1280x720)及以上</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div ref=\"video_home\">\r\n    </div>\r\n\r\n\r\n  </div>\r\n</template>\r\n  \r\n<script>\r\nimport axios from 'axios'\r\nimport { mapState } from 'vuex';\r\nexport default {\r\n  props: ['order'],\r\n  data() {\r\n    return {\r\n      UPLOAD_INFO: {\r\n        NO_FILE: \"请先选择文件\",\r\n        INVALID_TYPE: \"不支持该类型文件上传\",\r\n        UPLOAD_FAILED: \"上传失败\",\r\n        UPLOAD_SUCCESS: \"上传成功\",\r\n      },\r\n      ALLOWED_TYPE: {\r\n        \"video/mp4\": \"mp4\",\r\n        \"video/ogg\": \"ogg\",\r\n      },\r\n      uploadFile: '',\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    if (sessionStorage.getItem('V_id')) {\r\n      axios.post('http://localhost:3000/deleteInfo', {\r\n        params: {\r\n          v_id: sessionStorage.getItem('V_id'),\r\n          user_id: this.$store.state.userInfo.userid\r\n        }\r\n      }).then(() => {\r\n        sessionStorage.clear()\r\n      })\r\n    }\r\n\r\n\r\n\r\n  },\r\n  created() {\r\n   \r\n  \r\n  },\r\n\r\n  methods: {\r\n    load(e) {\r\n      this.uploadFile = this.$refs.file\r\n      const { files: [file] } = this.uploadFile\r\n      this.file = file\r\n      this.a(this.$refs.file)\r\n    },\r\n\r\n    fileDragover(e) {\r\n      e.preventDefault()\r\n    },\r\n    fileDrop(e) {\r\n      e.preventDefault()\r\n      console.log(e.dataTransfer.files);\r\n      const file = e.dataTransfer.files[0]\r\n      this.file = file\r\n      this.a(file)\r\n    },\r\n    a(jfile) {\r\n      if (!jfile) {\r\n        this.$message({\r\n          message: this.UPLOAD_INFO.NO_FILE,\r\n          type: 'warning'\r\n        });\r\n        return\r\n      }\r\n      if (!this.ALLOWED_TYPE[this.file.type]) {\r\n        this.$message({\r\n          message: this.UPLOAD_INFO.INVALID_TYPE,\r\n          type: 'warning'\r\n        });\r\n        return\r\n      } else {\r\n        const aa = this.$refs.file\r\n\r\n        const { files: [file] } = aa\r\n        if (jfile.name == '') {\r\n          this.$store.commit(\"SET_PROJECTTITLEID\", [{ id: file }]);\r\n          console.log('aaaaaaaaaaaaaaaaaaa', aa);\r\n\r\n        } else {\r\n          this.$store.commit(\"SET_PROJECTTITLEID\", [{ id: jfile }]);\r\n        }\r\n        this.$router.push({ name: 'uploadHome' })\r\n      }\r\n    },\r\n  }\r\n}\r\n</script>\r\n  \r\n<style scoped lang=\"scss\">\r\n#press {\r\n  width: 100%;\r\n  height: 50px;\r\n  border-radius: 0;\r\n  background: #FFF;\r\n}\r\n\r\nprogress::-webkit-progress-bar {\r\n  background-color: #1E1E24;\r\n}\r\n\r\nprogress::-webkit-progress-value {\r\n  background: #772ce8;\r\n  background: -webkit-gradient(linear, 30% 0%, 0% 100%, from(#772ce8), to(#f140f8));\r\n  border-radius: 0.2rem;\r\n}\r\n\r\n::v-deep .el-progress-bar__outer {\r\n  width: 100%;\r\n  height: 50px !important;\r\n  border-radius: 0;\r\n}\r\n\r\n.img_pink {\r\n  width: 100%;\r\n  height: 180px;\r\n  background: #6811eb;\r\n  position: relative;\r\n}\r\n\r\n.img_pink img {\r\n  position: absolute;\r\n  left: 230px;\r\n  top: 20px;\r\n\r\n}\r\n\r\n.img_pink h1 {\r\n  color: #fff;\r\n  padding-top: 70px;\r\n\r\n}\r\n\r\n.layout_cont {\r\n  height: 445px;\r\n  background: #1E1E24;\r\n  padding: 25px 25px 0 25px;\r\n  cursor: pointer;\r\n}\r\n\r\n.layout_cont p {\r\n  color: #ffffff61;\r\n  margin: 0;\r\n  font-size: 14px;\r\n  margin-bottom: 9px;\r\n  text-align: left;\r\n}\r\n\r\n.layout_cont .uploadbox {\r\n  width: 100%;\r\n  height: 310px;\r\n  background: #29292F;\r\n  margin-bottom: 30px;\r\n  border-radius: 4px;\r\n  color: #fff;\r\n  border-radius: 3px;\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  flex-wrap: wrap;\r\n  align-items: center;\r\n  flex-direction: row;\r\n\r\n}\r\n\r\n.layout_cont .uploadbox .upload_main {\r\n  width: 341px;\r\n  height: 199px;\r\n  border: 1px dashed #979797;\r\n  border-radius: 4px;\r\n  margin-right: 60px;\r\n}\r\n\r\n.layout_cont .uploadbox .upload_right span {\r\n  width: 114px;\r\n  height: 32px;\r\n  font-size: 13px;\r\n  line-height: 32px;\r\n  display: inline-block;\r\n  border-radius: 20px;\r\n  background: linear-gradient(135deg, #d242e6, #00c5ff 52%, #d242e6)\r\n}\r\n\r\n.layout_cont .info {\r\n  width: 100%;\r\n  display: flex;\r\n}\r\n\r\n.layout_cont .info .info_item {\r\n  flex: 1;\r\n  height: 50px;\r\n  border-radius: 4px;\r\n  padding: 16px;\r\n  background: #2f2f35;\r\n  margin-right: 10px;\r\n}\r\n\r\n.layout_cont .info .info_item:last-child {\r\n  margin-right: 0;\r\n}\r\n\r\n.layout_cont .info .info_item p {\r\n  color: rgba(255, 255, 255, 0.38);\r\n  ;\r\n}\r\n\r\n.layout_cont .info .info_item>p:nth-child(1) {\r\n  color: #fff;\r\n}\r\n</style>\r\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}