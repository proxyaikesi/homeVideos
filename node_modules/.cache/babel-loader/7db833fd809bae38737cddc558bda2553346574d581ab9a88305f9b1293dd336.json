{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"text\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_2 = {\n  class: \"fullPage\",\n  ref: \"fullPageaa\"\n};\nconst _hoisted_3 = {\n  style: {\n    \"color\": \"brown\",\n    \"font-size\": \"50px\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", {\n    class: \"h1\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.one && $setup.one(...args))\n  }, [_createTextVNode(\"点我 \"), _hoisted_1, _createVNode(_component_router_link, {\n    to: \"/register\",\n    \"active-class\": \"active\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"皮蛋编程\")]),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", {\n    class: \"fullPageContainer\",\n    ref: \"fullPageContainer\",\n    onMousewheel: _cache[1] || (_cache[1] = (...args) => $setup.mouseWheelHandle && $setup.mouseWheelHandle(...args)),\n    \"on:DOMMouseScroll\": _cache[2] || (_cache[2] = (...args) => $setup.mouseWheelHandle && $setup.mouseWheelHandle(...args))\n  }, [_createCommentVNode(\" <Video v-for=\\\"(item, index) in videolist.newArr\\\" :inNum=\\\"index + 1\\\" :isplay=\\\"fullpage.current\\\"\\r\\n          :mp4Url=\\\"item.file_name\\\">\\r\\n        \\r\\n\\r\\n        </Video> \"), _createElementVNode(\"h2\", _hoisted_3, _toDisplayString($setup.videolist.newArr), 1 /* TEXT */)], 544 /* HYDRATE_EVENTS, NEED_PATCH */)], 512 /* NEED_PATCH */)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","type","class","ref","style","onClick","_cache","args","$setup","one","_hoisted_1","_createVNode","_component_router_link","to","_hoisted_2","onMousewheel","mouseWheelHandle","_createCommentVNode","_hoisted_3","_toDisplayString","videolist","newArr"],"sources":["D:\\vue3\\video\\src\\components\\index.vue"],"sourcesContent":["<template>\r\n  <div class=\"h1\" @click=\"one\">点我\r\n    <input type=\"text\">\r\n    <router-link to=\"/register\" active-class=\"active\">皮蛋编程</router-link>\r\n  </div>\r\n  <div class=\"fullPage\" ref=\"fullPageaa\">\r\n    <div class=\"fullPageContainer\" ref=\"fullPageContainer\" @mousewheel=\"mouseWheelHandle\"\r\n      @DOMMouseScroll=\"mouseWheelHandle\">\r\n        <!-- <Video v-for=\"(item, index) in videolist.newArr\" :inNum=\"index + 1\" :isplay=\"fullpage.current\"\r\n          :mp4Url=\"item.file_name\">\r\n        \r\n\r\n        </Video> -->\r\n        <h2 style=\"color: brown; font-size: 50px;\">{{  videolist.newArr }}</h2>\r\n\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n  \r\n<script>\r\nimport { RouterView } from 'vue-router';\r\nimport { videoPlay } from 'vue3-video-play'\r\nimport 'vue3-video-play/dist/style.css'\r\nimport Video from './video.vue'\r\nimport { onBeforeMount, getCurrentInstance, ref, reactive, onUpdated, onMounted, nextTick, } from \"vue\";\r\n\r\nimport axios from 'axios'\r\nexport default ({\r\n  components: {\r\n    videoPlay,\r\n    Video,\r\n    RouterView\r\n  },\r\n  setup() {\r\n    let videolist = reactive({\r\n      arrList: [],  // 所有视频信息\r\n      newArr: [], // 默认5条累加\r\n      everyTime: 5\r\n    })\r\n    onBeforeMount(() => {\r\n      fnList()\r\n\r\n    });\r\n    function fnList() {\r\n      axios.get('http://localhost:3000/getVideo').then((el) => {\r\n        videolist.arrList = el.data.item.sort(()=> 0.5 - Math.random())\r\n        console.log( videolist.arrList);\r\n      \r\n        addList(5)\r\n      })\r\n    }\r\n    function addList(nums) {\r\n      let num = 0\r\n      console.log('ssssss啊实打实的',videolist.newArr);\r\n      if (videolist.arrList.length >= 5) {\r\n        \r\n        videolist.newArr = videolist.arrList.slice(0, videolist.everyTime)\r\n      }\r\n\r\n    }\r\n    const fullPageContainer = ref()\r\n    const fullPageaa = ref()\r\n    const fullpage = reactive({\r\n      current: 1, // 当前的页面编号\r\n      isScrolling: false, // 是否在滚动,是为了防止滚动多页，需要通过一个变量来控制是否滚动S\r\n      deltaY: 0 //返回鼠标滚轮的垂直滚动量，保存的鼠标滚动事件的deleteY,用来判断是往下还是往上滚\r\n    })\r\n    const one = () => {\r\n      videolist.everyTime += 5\r\n      addList()\r\n    }\r\n\r\n    const next = () => { // 往下切换\r\n      let len = videolist.newArr.length; // 页面的个数\r\n      if (fullpage.current + 1 <= len) { // 如果当前页面编号+1 小于总个数，则可以执行向下滑动\r\n        fullpage.current += 1; // 页面+1\r\n        console.log('页数', fullpage.current);\r\n        move(fullpage.current); // 执行切换\r\n\r\n      }\r\n    }\r\n    const pre = () => {// 往上切换\r\n      if (fullpage.current - 1 > 0) { // 如果当前页面编号-1 大于0，则可以执行向下滑动\r\n        fullpage.current -= 1;// 页面+1\r\n        console.log('页数', fullpage.current);\r\n        move(fullpage.current);// 执行切换\r\n      }\r\n    }\r\n    const move = (index) => {\r\n      fullpage.isScrolling = true; // 为了防止滚动多页，需要通过一个变量来控制是否滚动\r\n      directToMove(index); //执行滚动\r\n      setTimeout(() => {  //这里的动画是1s执行完，使用setTimeout延迟1s后解锁\r\n        fullpage.isScrolling = false;\r\n      }, 1000);\r\n    }\r\n    const directToMove = (index) => {\r\n      let height = fullPageaa.value.clientHeight; //获取屏幕的宽度c\r\n      // let scrollPage = this.$refs[\"fullPageContainer\"]; // 获取执行tarnsform的元素\r\n      let scrollPage = fullPageContainer.value // 获取执行tarnsform的元素\r\n      let scrollHeight; // 计算滚动的告诉，是往上滚还往下滚\r\n      scrollHeight = -(index - 1) * height + \"px\";\r\n      scrollPage.style.transform = `translateY(${scrollHeight})`;\r\n      fullpage.current = index;\r\n    }\r\n    const mouseWheelHandle = (event) => { // 监听鼠标监听\r\n      // 添加冒泡阻止\r\n      let evt = event || window.event;\r\n      if (evt.stopPropagation) {\r\n        evt.stopPropagation();\r\n      } else {\r\n        evt.returnValue = false;\r\n      }\r\n      if (fullpage.isScrolling) { // 判断是否可以滚动\r\n        return false;\r\n      }\r\n      let e = event.originalEvent || event;\r\n      fullpage.deltaY = e.deltaY || e.detail; // Firefox使用detail\r\n      if (fullpage.deltaY > 0) {\r\n        next();\r\n      } else if (fullpage.deltaY < 0) {\r\n        pre();\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n    return {\r\n      fullpage, mouseWheelHandle, videolist,\r\n      directToMove, directToMove, move, pre, one, next, fullPageContainer, fullPageaa\r\n    }\r\n  },\r\n})\r\n\r\n</script>\r\n  \r\n<style  lang=\"scss\">\r\n\r\n.h1 {\r\n  color: #fff;\r\n  position: absolute;\r\n  z-index: 9999;\r\n}\r\n\r\n.fullPage {\r\n  height: 830px; //一定要设置，保证占满\r\n  overflow: hidden; //一定要设置，多余的先隐藏ss\r\n  font-size: 0;\r\n\r\n  // background: red;\r\n}\r\n\r\n.fullPageContainer {\r\n  width: 100%;\r\n  height: 830px; //一定要设置，保证占满\r\n\r\n  transition: all linear 0.3s;\r\n}\r\n\r\n.section {\r\n  width: 100%;\r\n  height: 100vh;\r\n  background-position: center center;\r\n  background-repeat: no-repeat;\r\n}\r\n\r\n\r\n.section1 .secction1-content {\r\n  color: #fff;\r\n  text-align: center;\r\n  position: absolute;\r\n  top: 40%;\r\n  right: 0;\r\n  left: 0;\r\n}\r\n\r\n.secction1-content h1 {\r\n  font-size: 40px;\r\n  padding-bottom: 30px;\r\n}\r\n\r\n.secction1-content p {\r\n  font-size: 20px;\r\n}\r\n</style>\r\n  "],"mappings":";gCAEIA,mBAAA,CAAmB;EAAZC,IAAI,EAAC;AAAM;;EAGfC,KAAK,EAAC,UAAU;EAACC,GAAG,EAAC;;;EAQhBC,KAAsC,EAAtC;IAAA;IAAA;EAAA;AAAsC;;;6DAZhDJ,mBAAA,CAGM;IAHDE,KAAK,EAAC,IAAI;IAAEG,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,MAAA,CAAAC,GAAA,IAAAD,MAAA,CAAAC,GAAA,IAAAF,IAAA,CAAG;uBAAE,KAC3B,GAAAG,UAAmB,EACnBC,YAAA,CAAoEC,sBAAA;IAAvDC,EAAE,EAAC,WAAW;IAAC,cAAY,EAAC;;sBAAS,MAAI,C,iBAAJ,MAAI,E;;QAExDb,mBAAA,CAYM,OAZNc,UAYM,GAXJd,mBAAA,CAUM;IAVDE,KAAK,EAAC,mBAAmB;IAACC,GAAG,EAAC,mBAAmB;IAAEY,YAAU,EAAAT,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,MAAA,CAAAQ,gBAAA,IAAAR,MAAA,CAAAQ,gBAAA,IAAAT,IAAA,CAAgB;IACjF,mBAAc,EAAAD,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,MAAA,CAAAQ,gBAAA,IAAAR,MAAA,CAAAQ,gBAAA,IAAAT,IAAA,CAAgB;MAC/BU,mBAAA,uLAIY,EACZjB,mBAAA,CAAuE,MAAvEkB,UAAuE,EAAAC,gBAAA,CAAxBX,MAAA,CAAAY,SAAS,CAACC,MAAM,iB"},"metadata":{},"sourceType":"module","externalDependencies":[]}